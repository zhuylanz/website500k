<!DOCTYPE html><html>
<head>	
	<script src="http://www.w3schools.com/lib/w3data.js"></script>
	<meta charset="utf-8">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
	 <meta name="viewport" content="width=device-width,initial-scale=1.0">
	 <link id="stylesheet-bootstrap.min" href="css/bootstrap.min.css" rel="stylesheet">
	 <link id="stylesheet-style" href="css/style.css" rel="stylesheet">
	 <script src="js/jquery.min.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/js.js"></script>
	 <script src="js/bootstrap.min.js"></script>	


	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"
	integrity="sha256-WPeFPWD3PZQUDrpFnDM1N2KadNVwCfNS4cCZ78b76T8="
	crossorigin="anonymous"></script>	
	<meta name="keywords" content="">
	<meta name="description" content="">
</head>
<body class="page-profile" > 
 
<div id="vue-region">
	<div id="mySidenav" class="left-sidebar">

	    <span style="font-size:30px;cursor:pointer" class="openbtn" onclick="openNav()">&#9776; open</span>
		 <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		<div class="left-sidebar-content">
			<div class="dashboard-full">	
				<ul class="">
					<li class="menu-profile submenu">
						<a class="has-submenu" href="#"><span>Profile Module</span></a>
						<ul>
							<li><a class="scan-post" href="#" v-on:click="fnSelect">Scan Post</a></li>
							<li><a class="scan-friend" href="#" v-on:click="fnSelect">Scan Friend</a></li>
							<li><a class="search-page" href="#" v-on:click="fnSelect">Find Page/Group</a></li>
							<li><a class="post" href="#" v-on:click="fnSelect">Post to Newsfeed/Group</a></li>
							<li><a class="newsfeed" href="#" v-on:click="fnSelect">Interact Newsfeed</a></li>
							<li><a class="post-friend" href="#" v-on:click="fnSelect">Post to Friend Wall</a></li>
							<li><a class="friend-edit" href="#" v-on:click="fnSelect">Add/Remove Friend</a></li>
						</ul>
					</li>
					<li class="menu-page ">
						<a   href="#"><span>Page Module</span></a>
					</li>
					<li class="menu-group"><a href="#"><span>Group Module</span></a></li>
					<li class="menu-ads"><a href="#"><span>Ad Module</span></a></li>
				</ul>	
			</div>	
		</div>	
	
	</div>
   
	<div   id="main" class="facebook-wrap"> 
		<div  > 
		<section class="section-header"> 
			<div class="container"> 
				<div class="row"> 
					<div class="col-md-9 col-sm-12 "> 
						<div class=" title center"> 
							<span><img alt="" src="images/title-facebook.png" />FACEBOOK STORE MANAGER</span>
						</div> 
					</div> 
					<div class="col-md-3 col-sm-12  align-right"> 
						<div class="select-system"> 		
							<span class="click-submenu1">Apple</span>
								<div class="list-system">
									<ul class="">
										<li class="item1"><a href=""><img alt="" src="images/icon29.png" />Tài khoản của bạn</a></li>
										<li class="item2"><a href=""><img alt="" src="images/icon30.png" />Hướng dẫn</a></li>
										<li class="item3"><a href=""><img alt="" src="images/icon31.png" />Điều khoản dịch vụ</a></li>
										<li class="item4"><a href=""><img alt="" src="images/icon32.png" />Chính sách bảo mật</a></li>
										<li class="item5"><a href=""><img alt="" src="images/icon33.png" />Thoát tài khoản</a></li>
									</ul>	
								</div>	
							<img alt="" src="images/icon-apple.png" />	
						</div>	 

					</div> 
				</div> 
			</div> 
		</section> 
		<section class="section section-profile" >
			<div class="container">
				<div class="row">
					<div class="col-sm-12">
					
					
					
				
					
						<div class="main-content" >	
	
							<div class="content-bar">
							<br /><br />
								<h1>Facebook Profile Tools</h1>

								<hr>
								<div id="scan-post" class="fn">
									<br /><br />
									<h2>Scan Post</h2>
									<div class="input">
										<label>ID</label>
										<input type="text" class="text">
										<input type="button" class="trigger" value="Scan Post" onclick="main_vue.scanPost()">

										<div class="download">
											<select class="list-type">
												<option>Reaction</option>
												<option>Comment</option>
											</select>
											<select class="file-type">
												<option>CSV</option>
												<option>XLS</option>
											</select>
											<input type="button" class="download" value="Download" onclick="main_vue.downloadFile('scan-post')">
										</div>
									</div>

									<div class="output">
										<h4 class="card-title">Kết quả tìm được</h4>
										<h6 class="card-subtitle">Bạn có thể lọc, sắp xếp, tìm kiếm và download file CSV, Excel, PDF & In ấn...</h6>
										<div class="table-responsive m-t-40 container">
											<div id="example23_wrapper" class="dataTables_wrapper row">
												<div class="dt-buttons col-md-6"><a class="dt-button buttons-copy buttons-html5" tabindex="0" aria-controls="example23" href="#"><span>Copy</span></a><a class="dt-button buttons-csv buttons-html5" tabindex="0" aria-controls="example23" href="#"><span>CSV</span></a><a class="dt-button buttons-excel buttons-html5" tabindex="0" aria-controls="example23" href="#"><span>Excel</span></a><a class="dt-button buttons-pdf buttons-html5" tabindex="0" aria-controls="example23" href="#"><span>PDF</span></a><a class="dt-button buttons-print" tabindex="0" aria-controls="example23" href="#"><span>Print</span></a></div>
											
												<div id="example23_filter" class="dataTables_filter col-md-6 align-right"><label>Search:<input class="" placeholder="" aria-controls="example23" type="search"></label></div>
											</div>
										</div>
										<table id="reaction-tbl">
											<thead>
												<tr>
													<th>ID</th>
													<th>Name</th>
													<th>Type</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
											</tbody>
										</table>
										<br /><br />
										<div class="table">
											<table id="comment-tbl">
												<thead>
													<tr>
														<th>ID</th>
														<th>Name</th>
														<th>Comment</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
													<tr>
														<td>ID1</td>
														<td>Name 1</td>
														<td>Type 2</td>
													</tr>
												</tbody>
											</table>
										</div>
										
									</div>
								</div>
								<br /><br />
								<div id="scan-friend" class="fn">
									<h2>Scan Friend List</h2>
									<div class="input">
										<input type="button" class="trigger" value="Scan" onclick="main_vue.scanFriend()">

										<div class="download">
											<select class="file-type">
												<option>CSV</option>
												<option>XLS</option>
											</select>
											<input type="button" class="download" value="Download" onclick="main_vue.downloadFile('scan-friend')">
										</div>
									</div>

									<div class="output">
										<table id="friend-tbl">
											<thead>
												<tr>
													<th>ID</th>
													<th>Name</th>
													<th>Link</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name 1</td>
													<td>Type 2</td>
												</tr>
											</tbody>
										</table>
										<div class="dataTables_paginate paging_simple_numbers col-sm-12" id="example23_paginate"><a class="paginate_button previous disabled" aria-controls="example23" data-dt-idx="0" tabindex="0" id="example23_previous">Previous</a><span><a class="paginate_button current" aria-controls="example23" data-dt-idx="1" tabindex="0">1</a><a class="paginate_button " aria-controls="example23" data-dt-idx="2" tabindex="0">2</a><a class="paginate_button " aria-controls="example23" data-dt-idx="3" tabindex="0">3</a><a class="paginate_button " aria-controls="example23" data-dt-idx="4" tabindex="0">4</a><a class="paginate_button " aria-controls="example23" data-dt-idx="5" tabindex="0">5</a><a class="paginate_button " aria-controls="example23" data-dt-idx="6" tabindex="0">6</a></span><a class="paginate_button next" aria-controls="example23" data-dt-idx="7" tabindex="0" id="example23_next">Next</a></div>
									</div>
								</div>

								<div id="search" class="fn">
									<h2>Search by ID</h2>
									<label>Keyword</label>

									<div class="input">
										<input type="text" class="text">
										<input type="radio" class="radio" name="search-type" value="Page">Page
										<input type="radio" class="radio" name="search-type" value="Group">Group
										<input type="button" class="trigger" value="Search" onclick="main_vue.search()">

										<div class="download">
											<select class="file-type">
												<option>CSV</option>
												<option>XLS</option>
											</select>
											<input type="button" class="download" value="Download" onclick="main_vue.downloadFile('search')">
										</div>
									</div>

									<div class="output">
										<table id="search-tbl">
											<thead>
												<tr>
													<th>ID</th>
													<th>Name</th>
													<th>Link</th>
													<th>Like</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>ID1</td>
													<td>Name </td>
													<td>Link</td>
													<td>Like</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name </td>
													<td>Link</td>
													<td>Like</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name </td>
													<td>Link</td>
													<td>Like</td>
												</tr>
												<tr>
													<td>ID1</td>
													<td>Name </td>
													<td>Link</td>
													<td>Like</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>

								<div id="post" class="fn">
									<h2>Post to Profile/Group</h2>

									<div class="input">
										<label>Message</label>
										<input type="text" class="text">

										<input type="radio" name="link-type" value="Link">Link
										<input type="text" class="text">
										<input type="radio" name="link-type" value="Opencart">OpenCart
										<select>
											<option>abc</option>
											<option>def</option>
										</select>
										<br /><br />
										<input type="radio" class="radio" name="post-type" value="Profile">Profile
										<input type="radio" class="radio" name="post-type" value="Group">Group<input type="text" class="text"/>
										<label>Wait Time (group only)</label>
										<input type="text" class="text">
										<input type="button" class="trigger" value="Post" onclick="main_vue.post()">

										<div class="download">
											<select class="file-type">
												<option>CSV</option>
												<option>XLS</option>
											</select>
											<input type="button" class="download" value="Download" onclick="main_vue.downloadFile('post')">
										</div>
									</div>

									<div class="output">
										<table id="post-tbl">
											<thead>
												<tr>
													<th>ID</th>
												</tr>
											</thead>
											<tbody></tbody>
										</table>
									</div>
								</div>


								<div id="newsfeed" class="fn">
									<h2>Interact with Newsfeed</h2>
									
									<div class="form-body output">
										<div class="row p-t-20">
											<div class="col-md-6">
												<div class="form-group">
													<label class="control-label">First Name</label>
													<input id="firstName" class="form-control" placeholder="John doe" type="text">
													<small class="form-control-feedback"> This is inline help </small> </div>
											</div>
											<!--/span-->
											<div class="col-md-6">
												<div class="form-group has-danger">
													<label class="control-label">Last Name</label>
													<input id="lastName" class="form-control form-control-danger" placeholder="12n" type="text">
													<small class="form-control-feedback"> This field has error. </small> </div>
											</div>
											<!--/span-->
										</div>
										<!--/row-->
										<div class="row">
											<div class="col-md-6">
												<div class="form-group has-success">
													<label class="control-label">Gender</label>
													<select class="form-control custom-select">
														<option value="">Male</option>
														<option value="">Female</option>
													</select>
													<small class="form-control-feedback"> Select your gender </small> </div>
											</div>
											<!--/span-->
											<div class="col-md-6">
												<div class="form-group">
													<label class="control-label">Date of Birth</label>
													<input class="form-control" placeholder="dd/mm/yyyy" type="date">
												</div>
											</div>
											<!--/span-->
										</div>
										<!--/row-->
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label class="control-label">Category</label>
													<select class="form-control custom-select" data-placeholder="Choose a Category" tabindex="1">
														<option value="Category 1">Category 1</option>
														<option value="Category 2">Category 2</option>
														<option value="Category 3">Category 5</option>
														<option value="Category 4">Category 4</option>
													</select>
												</div>
											</div>
											<!--/span-->
											<div class="col-md-6">
												<div class="form-group">
													<label class="control-label">Membership</label>
													<div class="custom-control custom-radio">
														<input id="customRadio1" name="customRadio" class="custom-control-input" type="radio">
														<label class="custom-control-label" for="customRadio1">Free</label>
													</div>
													<div class="custom-control custom-radio">
														<input id="customRadio2" name="customRadio" class="custom-control-input" type="radio">
														<label class="custom-control-label" for="customRadio2">Paid</label>
													</div>
												</div>
											</div>
											<!--/span-->
										</div>
										<!--/row-->
										<h3 class="box-title m-t-40">Address</h3>
										<hr>
										<div class="row">
											<div class="col-md-12 ">
												<div class="form-group">
													<label>Street</label>
													<input class="form-control" type="text">
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label>City</label>
													<input class="form-control" type="text">
												</div>
											</div>
											<!--/span-->
											<div class="col-md-6">
												<div class="form-group">
													<label>State</label>
													<input class="form-control" type="text">
												</div>
											</div>
											<!--/span-->
										</div>
										<!--/row-->
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label>Post Code</label>
													<input class="form-control" type="text">
												</div>
											</div>
											<!--/span-->
											<div class="col-md-6">
												<div class="form-group">
													<label>Country</label>
													<select class="form-control custom-select">
														<option>--Select your Country--</option>
														<option>India</option>
														<option>Sri Lanka</option>
														<option>USA</option>
													</select>
												</div>
											</div>
											<!--/span-->
										</div>
									</div>
									
								</div>

								<div id="post-friend" class="fn">
									<h2>Post to Friend Wall</h2>
								</div>

								<div id="friend-edit" class="fn">
									<h2>Add or Remove Friend</h2>
								</div>

							</div>
						
							
                            </div>
					 </div>
					 
				</div>
			</div>
		 </section>
		<section class="section section-footer">
			<div class="container">
				<div class="row">
					<div class="col-sm-6">
						Copyright  Website500k 2017. All rights reserved.
					</div> 
					<div class="col-sm-6 align-right">
						
					<a class="atachment popover-tooltip" href="#" data-toggle="tooltip" data-placement="bottom" title="Góp ý với ban quản trị">Góp ý &nbsp; &nbsp;<img alt="" src="images/icon28.png" /></a>
					</div> 
				</div>
			</div>
		 </section>		
	</div>	 
		 <script>
		let main_vue = new Vue({
			el : '#vue-region',

			data : {
				log_scanPost : [],
				log_search : [],
				log_post : [],
				log_scanFriend : [],
			},

			methods : {
				fnSelect : function(e) {
					$('.fn').hide();
					$('#'+e.srcElement.className).show();
				},
				scanPost : function() {
					socket.emit('ngin-scanPost', $('#scan-post input.text').val(), res => {
						this.log_scanPost = res;
						if(res.error) {
							console.log(res.error);
							$('.status-bar').text('Có lỗi xảy ra vì request không hợp lệ').css('visibility', 'visible');
							setTimeout(() => { $('.status-bar').css('visibility', 'hidden'); }, 5000);

						} else {
							let reaction = res.reactions.data;
							let comment = res.comments.data;
							let tbody_reaction = '';
							let tbody_comment = '';
							for (var i in reaction) {
								tbody_reaction += '<tr><td>' + reaction[i].id + '</td><td>' + reaction[i].name + '</td><td>' + reaction[i].type + '</td></tr>';
							}
							for (var j in comment) {
								tbody_comment += '<tr><td>' + comment[j].from.id + '</td><td>' + comment[j].from.name + '</td><td>' + comment[j].message + '</td></tr>';
							}

							$('#scan-post #reaction-tbl tbody').html(tbody_reaction);
							$('#scan-post #comment-tbl tbody').html(tbody_comment);
						}
						console.log('scan post OK');
					});
					// $('#scan-post input.trigger').prop('onclick', null).off('click');
				},
				scanFriend : function() {
					socket.emit('ngin-scanFriend', {
						id: 'zhuylanz20@gmail.com',
						pass: 'iamarobot'
					},
					res => {
						let tbody = '';
						for (var i in res) {
							tbody += '<tr><td>' + res[i][0] + '</td><td>' + res[i][1] + '</td><td>' + res[i][2] + '</td></tr>';
						}
						$('#scan-friend tbody').html(tbody);
						console.log('scan friend OK');
					});
				},
				search : function() {
					if ($('#search input.radio').eq(1).is(':checked')) {
						socket.emit('ngin-searchGroup', $('#search input.text').val(), res => {
							let tbody = '';
							res = res.data;
							for (var i in res) {
								tbody += '<tr><td>' + res[i].id + '</td><td>' + res[i].name + '</td><td>' + 'facebook.com/' + res[i].id + '</td></tr>';
							}
							$('#search th').eq(3).hide();
							$('#search tbody').html(tbody);
							console.log('search group OK');
						});
					} else {
						socket.emit('ngin-searchPage', $('#search input.text').val(), res => {
							let tbody = '';
							res = res.data;
							for (var i in res) {
								tbody += '<tr><td>' + res[i].id + '</td><td>' + res[i].name + '</td><td>' + res[i].link + '</td><td>' + res[i].fan_count + '</td></tr>';
							}
							$('#search th').eq(3).show();
							$('#search tbody').html(tbody);

							console.log('search page OK');
						});
					}
					// $('#search input.trigger').prop('onclick', null).off('click');
				},
				post : function() {
					if ($('#post input.radio').eq(1).is(':checked')) {
						socket.emit('ngin-postGroup', {
							message: $('#post input.text').eq(0).val(),
							link: $('#post input.text').eq(1).val(),
							gid: $('#post input.text').eq(2).val(),
							wait_time: $('#post input.text').eq(3).val()
						}, res => {
							console.log('post group OK');
							socket.removeListener('logging', logging);
						});
						function logging(msg) {
							console.log('logging');
							let tbody = '';
							for (var i in msg) {
								tbody += '<tr><td>' + msg[i].id + '</td></tr>';
							}
							$('#post tbody').html(tbody);
						}
						socket.on('logging', logging);
					} else {
						socket.emit('ngin-postProfile', {
							message: $('#post input.text').eq(0).val(),
							link: $('#post input.text').eq(1).val()
						}, res => {
							let tbody = '';
							tbody += '<tr><td>' + res.id + '</td></tr>'
							$('#post tbody').html(tbody);
							console.log('post profile OK');
						});
					}
					// $('#search input.trigger').prop('onclick', null).off('click');
				},
				//functional:
				downloadFile : function(ngin) {
					switch (ngin) {
						case 'scan-post':
						var list_type = $('#scan-post select.list-type').val();
						var file_type = $('#scan-post select.file-type').val();
						if (list_type == 'Reaction') {
							file_type == 'CSV' ? xport.toCSV('reaction-tbl') : xport.toXLS('reaction-tbl');
						} else {
							file_type == 'CSV' ? xport.toCSV('comment-tbl') : xport.toXLS('comment-tbl');							
						}
						break;

						case 'scan-friend':
						var file_type = $('#scan-post select.file-type').val();
						file_type == 'CSV' ? xport.toCSV('friend-tbl') : xport.toXLS('friend-tbl');
						break;

						case 'search':
						var file_type = $('#search select.file-type').val();
						file_type == 'CSV' ? xport.toCSV('search-tbl') : xport.toXLS('search-tbl');
						break;

						case 'post':
						var file_type = $('#post select.file-type').val();
						file_type == 'CSV' ? xport.toCSV('post-tbl') : xport.toXLS('post-tbl');
						break;
					}
				}

			}

		});



let token = 'EAACZC6awggg0BANL7PWsxn7wOZClI7MPZCTOhvZArCPRsiV5WSMgYt4nZCZAsODJc7SKWVZBCgA3lEuMW6un1naBGj9hB1mRx5PlBIpAG14pbAb8ZBarmhBoH1REx5Ww7nFvFLk1RnbG1H4kOZALpc5lRlMjnZB2coWCutrI4cEGBNhqCGckq9QpVyjgiJifZBbR13zXcMG4Jf6eAZDZD';

let socket = io('http://nuhula.website:1234/profile');
socket.on('connect', function () {
	socket.emit('init', token, (res) => { console.log(res); });
});

let xport = {
	_fallbacktoCSV: true,  
	toXLS: function(tableId, filename) {   
		this._filename = (typeof filename == 'undefined') ? tableId : filename;

		if ((this._getMsieVersion() || this._isFirefox()) && this._fallbacktoCSV) {
			return this.toCSV(tableId);
		} else if (this._getMsieVersion() || this._isFirefox()) {
			alert("Not supported browser");
		}

		var htmltable = document.getElementById(tableId);
		var html = htmltable.outerHTML;

		this._downloadAnchor("data:application/vnd.ms-excel" + encodeURIComponent(html), 'xls'); 
	},
	toCSV: function(tableId, filename) {
		this._filename = (typeof filename === 'undefined') ? tableId : filename;
		var csv = this._tableToCSV(document.getElementById(tableId));
		var blob = new Blob([csv], { type: "text/csv" });

		if (navigator.msSaveOrOpenBlob) {
			navigator.msSaveOrOpenBlob(blob, this._filename + ".csv");
		} else {      
			this._downloadAnchor(URL.createObjectURL(blob), 'csv');      
		}
	},
	_getMsieVersion: function() {
		var ua = window.navigator.userAgent;

		var msie = ua.indexOf("MSIE ");
		if (msie > 0) {
			return parseInt(ua.substring(msie + 5, ua.indexOf(".", msie)), 10);
		}

		var trident = ua.indexOf("Trident/");
		if (trident > 0) {
			var rv = ua.indexOf("rv:");
			return parseInt(ua.substring(rv + 3, ua.indexOf(".", rv)), 10);
		}

		var edge = ua.indexOf("Edge/");
		if (edge > 0) {
			return parseInt(ua.substring(edge + 5, ua.indexOf(".", edge)), 10);
		}

		return false;
	},
	_isFirefox: function(){
		if (navigator.userAgent.indexOf("Firefox") > 0) {
			return 1;
		}

		return 0;
	},
	_downloadAnchor: function(content, ext) {
		var anchor = document.createElement("a");
		anchor.style = "display:none !important";
		anchor.id = "downloadanchor";
		document.body.appendChild(anchor);


		if ("download" in anchor) {
			anchor.download = this._filename + "." + ext;
		}
		anchor.href = content;
		anchor.click();
		anchor.remove();
	},
	_tableToCSV: function(table) {
		var slice = Array.prototype.slice;

		return slice
		.call(table.rows)
		.map(function(row) {
			return slice
			.call(row.cells)
			.map(function(cell) {
				return '"t"'.replace("t", cell.textContent);
			})
			.join(",");
		})
		.join("\r\n");
	}
};

</script>
	</div></div>
</body>
</html>